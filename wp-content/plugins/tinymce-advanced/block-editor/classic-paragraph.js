!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([,function(e,t,o){"use strict";o.r(t);const{wp:r}=window,{Component:n,createElement:c}=r.element,{BACKSPACE:i,DELETE:a,F10:s}=r.keycodes,l=window.tadvBlockRegister;const{RawHTML:d,createElement:p}=wp.element;const{join:u,split:m,create:b,toHTMLString:f}=wp.richText,{createBlock:h,getBlockContent:g}=wp.blocks;var k={from:(()=>{const e=[];return["core-embed/twitter","core-embed/youtube","core-embed/facebook","core-embed/instagram","core-embed/wordpress","core-embed/soundcloud","core-embed/spotify","core-embed/flickr","core-embed/vimeo","core-embed/animoto","core-embed/cloudup","core-embed/collegehumor","core-embed/crowdsignal","core-embed/dailymotion","core-embed/hulu","core-embed/imgur","core-embed/issuu","core-embed/kickstarter","core-embed/meetup-com","core-embed/mixcloud","core-embed/polldaddy","core-embed/reddit","core-embed/reverbnation","core-embed/screencast","core-embed/scribd","core-embed/slideshare","core-embed/smugmug","core-embed/speaker","core-embed/speaker-deck","core-embed/ted","core-embed/tumblr","core-embed/videopress","core-embed/wordpress-tv","core-embed/amazon-kindle"].forEach(t=>{e.push({type:"block",blocks:[t],transform:e=>{if(!e.url)return h("tadv/classic-paragraph",{content:""});const o=g(h(t,e));let r,n="<p>"+e.url+"</p>";return o&&o.indexOf("</figcaption>")>-1&&o.replace(/<figcaption[^>]*>([\s\S]*?)<\/figcaption>/,(function(e,t){r=t})),n+=r?"<p>"+r+"</p>":'<p><br data-mce-bogus="1"></p>',h("tadv/classic-paragraph",{content:n})}})}),["core/paragraph","core/image","core/heading","core/gallery","core/list","core/quote","core/code","core/columns","core/freeform","core/html","core/media-text","core/missing","core/preformatted","core/pullquote","core/subhead","core/table","core/text-columns","core/verse"].forEach(t=>{e.push({type:"block",blocks:[t],transform:e=>{let o=g(h(t,e));return(!o||o.indexOf("</div>")>-1)&&(o+='<p><br data-mce-bogus="1"></p>'),h("tadv/classic-paragraph",{content:o})}})}),e.push({type:"raw",priority:21,isMatch:()=>!0},{type:"block",isMultiBlock:!0,blocks:["core/paragraph"],transform:e=>{const t=f({value:u(e.map(({content:e})=>b({html:e})),"\u2028"),multilineTag:"p"});return h("tadv/classic-paragraph",{content:t})}},{type:"block",isMultiBlock:!0,blocks:["tadv/classic-paragraph"],transform:e=>{const t=f({value:u(e.map(({content:e})=>b({html:e})),"\u2028")});return h("tadv/classic-paragraph",{content:t})}},{type:"block",isMultiBlock:!0,blocks:["core/freeform"],transform:e=>{const t=f({value:u(e.map(({content:e})=>b({html:e})),"\u2028")});return h("tadv/classic-paragraph",{content:t})}}),e})(),to:[{type:"block",blocks:["core/freeform"],transform:e=>h("core/freeform",e)},{type:"block",blocks:["core/html"],transform:e=>h("core/html",e)}]};const{__:y}=wp.i18n,v=window.tadvBlockRegister,{name:w,attributes:B,category:_}={name:"tadv/classic-paragraph",category:"common",attributes:{content:{type:"string",source:"html"},align:{type:"string"}}};var x={name:w,attributes:B,category:_,title:v.classicParagraphTitle,description:v.description,keywords:[y("text")],icon:"welcome-widgets-menus",supports:{className:!1,customClassName:!1,reusable:!0},merge:(e,t)=>({content:(e.content||"")+(t.content||"")}),transforms:k,edit:class extends n{constructor(e){super(e),this.initialize=this.initialize.bind(this),this.onSetup=this.onSetup.bind(this),this.focus=this.focus.bind(this)}componentDidMount(){const{baseURL:e,suffix:t}=window.wpEditorL10n.tinymce;window.tinymce.EditorManager.overrideDefaults({base_url:e,suffix:t}),"complete"===document.readyState?this.initialize():window.addEventListener("DOMContentLoaded",this.initialize)}componentWillUnmount(){window.addEventListener("DOMContentLoaded",this.initialize),r.oldEditor.remove(`editor-${this.props.clientId}`)}componentDidUpdate(e){const{clientId:t,isSelected:o,attributes:{content:r}}=this.props,n=window.tinymce.get(`editor-${t}`);e.attributes.content!==r&&this.content!==r&&n.setContent(r||""),!o&&n.initialized&&n.fire("blur",{wpBlockDidUpdate:!0})}initialize(){const{clientId:e,setAttributes:t}=this.props,{settings:o}=window.wpEditorL10n.tinymce;r.oldEditor.initialize(`editor-${e}`,{tinymce:{...o,inline:!0,content_css:!1,fixed_toolbar_container:`#toolbar-${e}`,setup:this.onSetup}}),t({id:e})}onSetup(e){const{attributes:{content:t},setAttributes:o}=this.props;let r;this.editor=e,t&&e.on("loadContent",()=>e.setContent(t)),e.on("blur",t=>{if(t.wpBlockDidUpdate)return;r=e.selection.getBookmark(2,!0),this.content=e.getContent();const{isSelected:n}=this.props;return o({content:this.content}),e.once("focus",()=>{r&&e.selection.moveToBookmark(r)}),!n&&void 0}),e.on("mousedown touchstart",()=>{r=null}),e.on("keydown",t=>{t.keyCode!==i&&t.keyCode!==a||!function(e){const t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(this.props.onReplace([]),t.preventDefault(),t.stopImmediatePropagation());const{altKey:o}=t;o&&t.keyCode===s&&t.stopPropagation()}),e.on("init",()=>{const e=this.editor.getBody();document.activeElement===e&&(e.blur(),this.editor.focus())})}focus(){this.editor&&this.editor.focus()}onToolbarKeyDown(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}render(){const{clientId:e,name:t,attributes:o,setAttributes:r}=this.props;return[c("div",{key:"toolbar",id:`toolbar-${e}`,className:"block-library-classic__toolbar tma-classic-paragraph__toolbar",onClick:this.focus,"data-placeholder":l.classicParagraphTitle,onKeyDown:this.onToolbarKeyDown}),c("div",{key:"editor",id:`editor-${e}`,className:"wp-block-freeform block-library-rich-text__tinymce tma-classic-paragraph"})]}},save:function({attributes:e}){const{content:t}=e;return p(d,null,t)}};const{dispatch:C,select:E}=wp.data,{createBlock:M,rawHandler:S}=wp.blocks;var P=function(){const e=E("core/block-editor").getSelectedBlock();let t;if(e){let o=e.attributes.content;o?(/<p data-tadv-p="keep">/.test(o)&&(o=o.replace(/<p data-tadv-p="keep">/g,"<p>")),t=S({HTML:o})):t=M("core/paragraph"),C("core/block-editor").replaceBlocks(e.clientId,t)}};!function(){const e=window.wp,t=window.tadvBlockRegister;if(!e||!t)return;const{createElement:o}=e.element,{__:r}=e.i18n,{addFilter:n}=e.hooks,{PluginBlockSettingsMenuItem:c}=e.editPost,{registerPlugin:i}=e.plugins,{registerBlockType:a,setDefaultBlockName:s}=e.blocks;t.classicParagraph?(a("tadv/classic-paragraph",x),i("tadv-add-submenu",{render:()=>(t.hybridMode&&s("tadv/classic-paragraph"),o(c,{allowedBlocks:["tadv/classic-paragraph"],icon:"screenoptions",label:r("Convert to Blocks"),onClick:P,small:null,role:"menuitem"}))})):t.hybridMode&&i("tadv-set-default-block",{render:()=>(s("core/freeform"),null)})}()}]);